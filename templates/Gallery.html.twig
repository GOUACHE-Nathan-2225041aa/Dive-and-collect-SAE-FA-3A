{% extends "base.html.twig" %}
{% block title %} Gallery {% endblock %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/gallery.css') }}" data-page-specific="{{ app.request.pathinfo }}"/>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('scripts/gallery.js') }}"></script>
{% endblock %}
{% block content %}
    <div class="bloc_content">
        <div class="search-sort-container">
            <input
                    type="text"
                    id="searchInput"
                    placeholder="Search by species, location, or profile name..."
                    onkeyup="filterGallery()"
                    class="search-input"
            />

            <select id="sortSelect" onchange="sortGallery()" class="sort-select">
                <option value="">Sort by</option>
                <option value="date">Date added</option>
                <option value="profile">Profile name</option>
            </select>
        </div>
        <div class="gallery-wrapper">
            {% for item in galleryItems %}
                <div class="gallery-card"
                     data-species="{{ item.espece.nom }}"
                     data-profile="{{ item.auteur.username|lower }}"
                     data-date="{{ item.dateadded|date('Y-m-d') }}">
                    <img src="{{ asset('uploads/photos/' ~ item.imagefilename) }}" alt="Photo of {{ item.espece.nom }}" class="gallery-image" />

                    <div class="gallery-info">
                        <h3 class="species-name">{{ item.espece.nom }}</h3>
                        <p class="photo-meta">
                            <strong>Date added:</strong> {{ item.dateadded|date('F j, Y') }}<br>
                        </p>

                        <div class="author-info">
                            <!--<img src="" alt="Profile picture" class="author-avatar" />-->
                            <span class="author-name"><strong>Published by:</strong> {{ item.auteur.username }}</span>
                        </div>
                        <div class="like-section">
                            <img src="{{ asset('images/comme.png') }}" alt="Like picture" class="like-icon" />
                            <!--<span class="like-count"></span>-->
                        </div>
                        <a href="{{ path('Species_Map')~'?espece='~item.id }}" class="map-button" title="View location">
                            <img src="{{ asset('images/destination.png') }}" alt="Map icon">
                        </a>
                    </div>
                </div>
            {% else %}
                <p class="species-empty">No entries available yet.</p>
            {% endfor %}
        </div>

    </div>
{% endblock %}